# config/ 目錄說明

## 目標

統一管理專案設定，實現「單一設定來源、可追蹤覆蓋」，確保開發、部署、維運流程標準化，**嚴格區分敏感資訊來源**，支援本地、測試、正式多環境彈性。

---

## 設定來源與優先序

1. **struct 預設值**：在 loader.go 內直接給定，僅供非必要欄位做安全預設。
2. **config.yaml**：主設定檔，存放大多數參數（不得包含密碼/金鑰等敏感資料）。
3. **.env（可選）/環境變數**：外部環境優先覆蓋所有參數，機敏資訊與環境特定調整必須由此注入。

**最終優先序：**  
環境變數(ENV/.env) > config.yaml > struct 預設值

---

## 組態載入流程

1. **自動載入 `.env` 檔**（可有可無）
2. **建立預設 Config 結構**，給非必要欄位預設值
3. **載入 config/config.yaml**，不存在不致命，僅顯示警告
4. **解析環境變數**，如有同名則優先覆蓋
5. **結構驗證**（validator），所有 required 欄位未給值即報錯

**注意事項**：
預設值不應包含敏感資訊，僅用於非必要欄位。所有敏感資訊必須透過環境變數或 `.env` 檔注入。

---

## 典型用法

```go
cfg, err := config.LoadConfig()
if err != nil {
    // 參數錯誤，請立即終止服務
    log.Fatal(err)
}
fmt.Println(cfg.Server.HTTP.Port)
```